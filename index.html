<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <br><h1> Form With OTP</h1>
<form method="POST" class="register-form" id="create-form">
  
<br>Name:           <input type="text" name="name" id="full_name" placeholder="Your Name" required/>
  
<br>Phone Number:   <input type="tel" name="your_phone" id="phone" placeholder="Your Phone Number" value="+91"   pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" class="input-text" title="Please verify the Phone Number" required>
                    <span class="fa fa-stack fa-lg" id="ve" style="display: none;">
                    <i class="fa fa-certificate fa-stack-1x" style="font-size:25px;color: green" ></i>
                    <i class="fa fa-check fa-stack-1x fa-inverse" style="font-size:13px"></i>
                    </span>
                    <div id="recaptcha-container" ></div>
                    <button id="myBtn">Send code</button>
  
<br>Place:          <div  class="autocomplete">
                        <input type="text"   placeholder="Drop Location" id="place" required>
                    </div> 
  
<br>DOB:            <input type="date" placeholder="01/01/2020" id="Date" required>
  
<br>Message:        <input type="text" placeholder="Type Your Message" id="msg" required>

<br>                <input type="submit" name="submit" id="submit"   value="submit"/>
                                                             
</form>
  
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="wrapper">
      <div id="dialog">
        <h3>Please enter the 6-digit verification code we sent via SMS:</h3>
        <div id="form">
         <input type="text" id="verificationCode" placeholder="Enter verification code" class="input-text" required>
        </div>
        <button class="btn btn-primary btn-embossed" onclick="codeverify()">Verify</button>

        <div>
          Note: <b>Enter the phone Number With Country Code Eg: +919791597993 And Also You check the Captcha is verfied Then only You Get OTP</b>
          Didn't receive the code?<br/>
          <button id="myBtc">Send code again</button><br />
          <a onclick="myFunctio()" style="color: red;">Change phone number</a>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
var modal = document.getElementById("myModal");
var btn = document.getElementById("myBtn");
var btc = document.getElementById("myBtc");
var span = document.getElementsByClassName("close")[0];
btn.onclick = function() {
  document.getElementById("phone").readOnly = true;
  var number=document.getElementById('phone').value;

  firebase.auth().signInWithPhoneNumber(number,window.recaptchaVerifier).then(function (confirmationResult) {
      window.confirmationResult=confirmationResult;
      coderesult=confirmationResult;
      console.log(coderesult);
      alert("Message sent");
  }).catch(function (error) {
       
     document.getElementById("phone").readOnly = false;
      alert(error.message);
  });

  modal.style.display = "block";
}

btc.onclick = function() {
  modal.style.display = "none";
}
span.onclick = function() {
    modal.style.display = "none";
   document.getElementById("phone").readOnly = false;
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
function myFunction() {
  document.getElementById("phone").readOnly = true;
}
function myFunctio() {
  document.getElementById("phone").readOnly = false;
  modal.style.display = "none";
}
var allElements = document.querySelectorAll(".mobile-verify");
      var i;
      for (i = 0; i < allElements.length; i++) {
        var el = allElements[i];
        el.addEventListener("keypress", function () {
          this.nextSibling.nextSibling.focus();
        });
      }
</script>
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-firestore.js"></script>
  <script src="form.js"></script>
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="NumberAuthentication.js" type="text/javascript"></script>
  <script src="auto.js"></script>
</body>
</html>
